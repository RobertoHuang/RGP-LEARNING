# Docker Compose

## 安装

- `Mac`环境下安装好`Docker`自带了`Docker Compose`，无须其他操作
- `Linux`环境下安装`Docker Compose`可参考[https://docs.docker.com/compose/install/](<https://docs.docker.com/compose/install/>)

## 常用的Docker Compose文件

- MySQL

    ```
    version: '3'
    services:
      mysql:
        restart: always
        container_name: mysql
        image: docker.io/mysql:5.7
        ports:
          - "3366:3306"
        environment:
          - TZ=Asia/Shanghai
          - MYSQL_ROOT_PASSWORD=#CgTpJY%SBI!!Szy
        command:
          --character-set-server=utf8mb4
          --init_connect='SET NAMES utf8'
          --query_cache_type=ON
          --query_cache_size=20M
          --max_connections=5000
          --lower_case_table_names=1
          --sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
        volumes:
          - mysql-data:/var/lib/mysql
          # 设置容器时区与宿主机保持一致
          - /etc/localtime:/etc/localtime:ro
        deploy:
          resources:
            limits:
              memory: 1G
    volumes:
      mysql-data:
        driver: local
    ```

    